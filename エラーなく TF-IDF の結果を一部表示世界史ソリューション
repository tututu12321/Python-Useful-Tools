from sklearn.feature_extraction.text import TfidfVectorizer
import pandas as pd

# サンプルテキストデータ
corpus = [
    "紀元前５世紀頃からローマと接触しながらたびたびローマ領のガリアに侵入し、ローマ軍との戦いとなった。",
    "ユトランド半島を原住地としていたと思われるキンブリ人とテウトネス人は前２世紀にエルベ川に沿って南下を開始し、アルプスを越えてイタリア半島に入り、ローマ共和政の末期のローマ軍と戦い、大きな脅威を与えた。",
    "その一部はピレネーを越えてイベリア半島にも侵入した。前１０３年、マリウスの率いるローマ軍に敗れて後退した。",
    "前５８年～前５１年にガリア遠征を行ったローマの将軍カエサルがライン川を越えてゲルマン人と戦った。そのころのゲルマン人の生活と社会はカエサルの『ガリア戦記』に記されている。",
    "またアウグストゥスはローマのすべての権力を一身に集中させてローマ帝国の初代皇帝となったが、ゲルマン民族との戦いでは手痛い敗北を喫している。",
    "紀元後９年、彼は将軍ウァールスに３軍団をつけて、ライン川を越えさせ、アルミニウスという首長が率いるゲルマンの一派を攻撃させた。",
    "ところがトイトブルクの戦いで、ローマ軍は大敗を喫してしまう。",
    "その後もローマにとってゲルマン人は強敵であり、長くライン川とドナウ川を結ぶ線を国境として対峙していた。",
    "軍人皇帝時代の２５１年にはデキウス帝がドナウ川を越えたゴート族と戦い戦死している。",
    "ゲルマン人の中にはローマ領内に移住するものもあり、ちょうどローマ市民だけで軍隊を維持できなくなっていたローマは、ゲルマン人からの防衛をゲルマン人傭兵に依存するようになった。"
]

# TF-IDF ベクトル化
vectorizer = TfidfVectorizer()
X = vectorizer.fit_transform(corpus)

# 単語リスト
terms = vectorizer.get_feature_names_out()

# 行列の次元確認
print("TF-IDF行列の形状:", X.shape)  # (文書数, 単語数)

# データフレームに変換
df_tfidf = pd.DataFrame(X.toarray(), columns=terms)

# 上位10個の単語を含む最初の5行を表示
print("TF-IDF 行列 (一部抜粋):")
print(df_tfidf.iloc[:, :10].head())  # 最初の10列のみ表示
